'use strict';function create(){var newPubsubList;return newPubsubList=Object.create(pubsubList),newPubsubList.subscriptions={},newPubsubList}var _=require('lodash'),pubsubList,subscription;pubsubList={createSubscription:function(topic,callback){var newSubscription,self=this;return newSubscription={id:_.uniqueId('sub_'),topic:topic,callback:callback,unsubscribe:function(){self.removeSubscription(this)}},this.addSubscription(newSubscription),newSubscription},addSubscription:function(subscription){'undefined'==typeof this.subscriptions[subscription.topic]&&(this.subscriptions[subscription.topic]={}),this.subscriptions[subscription.topic][subscription.id]=subscription},getSubscriptionCount:function(topic){return'undefined'==typeof this.subscriptions[topic]?0:Object.keys(this.subscriptions[topic]).length},removeSubscription:function(subscription){delete this.subscriptions[subscription.topic][subscription.id],0===this.getSubscriptionCount(subscription.topic)&&delete this.subscriptions[subscription.topic]},publish:function(topic,params){'undefined'!=typeof this.subscriptions[topic]&&0!==this.subscriptions[topic].length&&(params='undefined'!=typeof params?params:null,_.forOwn(this.subscriptions[topic],function(subscription){subscription.callback(params)}))}},module.exports={create:create};