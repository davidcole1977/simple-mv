'use strict';var sh=require('./simple-helpers'),_=require('lodash'),sce=require('./simple-create-extend'),simpleEvents=require('./simple-events'),appSubsList=require('./app-subscriptions'),GLOBAL_CONFIG=require('./global-config'),EVENTS=GLOBAL_CONFIG.EVENTS,prototype,defaultOptions,create,extend;prototype={bind:function(options){var targetData,viewDatum='undefined'==typeof options.viewDatum?null:options.viewDatum,targetDatum='undefined'==typeof options.targetDatum?null:options.targetDatum,eventNameSpace=null===targetDatum?'':':'+targetDatum;if(null===targetDatum)targetData=options.target.getRawData();else try{targetData=options.target.get(targetDatum)}catch(error){targetData=null}null!==targetDatum&&null===viewDatum&&(viewDatum=targetDatum),null===viewDatum?this.data=targetData:this.data[viewDatum]=targetData,appSubsList.createSubscription(EVENTS.MODEL.DATUM_UPDATE+':'+options.target.id+eventNameSpace,this.receiveBindEvent.bind(this,targetDatum,viewDatum))},receiveBindEvent:function(targetDatum,viewDatum,event){var targetData=null===targetDatum?event.target.getRawData():event.target.get(targetDatum);null!==viewDatum?this.data[viewDatum]=targetData:this.data=targetData},unbind:function(){},emitViewEvent:function(){}},_.assign(prototype,simpleEvents),defaultOptions={type:'view',data:{}},create=sce.create.bind(null,prototype,defaultOptions),extend=sce.extend.bind(null,create),module.exports={create:create,extend:extend};