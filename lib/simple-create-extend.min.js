'use strict';var sh=require('./simple-helpers'),_=require('lodash'),GLOBAL_CONFIG=require('./global-config'),simpleEvents=require('./simple-events'),EVENTS=GLOBAL_CONFIG.EVENTS;module.exports={create:function(prototype,defaultOptions,options){var component;if(options='object'==typeof options?options:{},_.assign(prototype,simpleEvents),sh.overridesProps(prototype,options))throw new Error('create(): Overriding prototype parameters is not permitted');return component=Object.create(prototype),_.assign(component,_.cloneDeep(defaultOptions),_.cloneDeep(options)),component.id=_.uniqueId(component.type),component.subscriptions={internal:{},external:{}},'function'==typeof options.initialise&&options.initialise.call(component),component.emitEvent({eventType:component.createEventType,publishParams:{target:component,eventType:component.createEventType}}),component},extend:function(create,options){if(!sh.isAnObject(options))throw new Error('extend(options) expects a single argument: options {object}');return{create:create.bind(null,options)}}};